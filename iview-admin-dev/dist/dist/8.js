webpackJsonp([8],{248:function(t,e,a){"use strict";function n(t){c||a(495)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(431),i=a.n(o);for(var s in o)"default"!==s&&function(t){a.d(e,t,function(){return o[t]})}(s);var r=a(497),l=a.n(r),c=!1,p=a(4),d=n,u=p(i.a,l.a,!1,d,"data-v-182ef9a3",null);u.options.__file="src\\views\\reptile-tool\\ipList.vue",e.default=u.exports},278:function(t,e,a){t.exports={default:a(279),__esModule:!0}},279:function(t,e,a){a(280),t.exports=a(0).Object.assign},280:function(t,e,a){var n=a(8);n(n.S+n.F,"Object",{assign:a(281)})},281:function(t,e,a){"use strict";var n=a(26),o=a(54),i=a(34),s=a(33),r=a(94),l=Object.assign;t.exports=!l||a(20)(function(){var t={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return t[a]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[a]||Object.keys(l({},e)).join("")!=n})?function(t,e){for(var a=s(t),l=arguments.length,c=1,p=o.f,d=i.f;l>c;)for(var u,f=r(arguments[c++]),h=p?n(f).concat(p(f)):n(f),g=h.length,m=0;g>m;)d.call(f,u=h[m++])&&(a[u]=f[u]);return a}:l},431:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(278),i=n(o),s=a(16),r=n(s),l=a(96),c=n(l),p=a(6),d=n(p);e.default={name:"ip-list",data:function(){var t=this;return{loading:!1,columns:[{type:"selection",width:60,align:"center"},{title:"Index",key:"index"},{title:"IP",key:"IP",render:function(t,e){return t("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){}}},e.row.protocol+"://"+e.row.ip+":"+e.row.port)}},{title:"地址",key:"address"},{title:"类型",key:"status"},{title:"来自",key:"from",render:function(t,e){return t("a",{attrs:{href:e.row.fromHref?e.row.fromHref:"javascript:void(0);",target:e.row.fromHref?"_blank":""}},""+(e.row.from||""))}},{title:"响应时间",key:"responseTime"},{title:"操作",render:function(e,a){return e("a",{attrs:{href:"javascript:void(0);",class:"red"},on:{click:function(e){t.onClickDel(a)}}},"删除")}}],ipList:[],params:{page:1,limit:20},total:0,startIndex:1,endIndex:3,selection:[],baseUrl:c.default.apiUrl,token:d.default.get("token"),uploadParams:{token:d.default.get("token")}}},computed:{},methods:{getList:function(t,e){var a=this;t&&(this.params.page=t);var n={params:{page:this.params.page,limit:this.params.limit}};this.loading=!0,this.$router.replace({path:"/reptile-tool/ipList",query:(0,i.default)({},n.params)}),e&&(n.params.noReptile=!0),r.default.post.ip.list(n).then(function(t){a.ipList=t.ipList,a.total=t.count,a.loading=!1}).catch(function(t){a.loading=!1})},onClickRemoveRepeat:function(){var t=this;if(!this.loading){this.loading=!0;var e={params:{}};this.loading=!0,r.default.post.ip.removeRepeat(e).then(function(e){t.$Message.success(e),t.loading=!1,t.getList()}).catch(function(e){t.loading=!1})}},onClickReptile:function(){var t=this,e=1,a=10;if(this.startIndex&&(e=this.startIndex),this.endIndex&&(a=this.endIndex),!this.loading){this.loading=!0;var n={params:{startPage:e,endPage:a}};this.loading=!0,r.default.post.ip.startReptile(n).then(function(e){t.$Message.success(e),t.loading=!1}).catch(function(e){t.loading=!1})}},onClickSelect:function(t){this.selection=t},onClickDelChecked:function(){var t=this;console.log(this.ipList);var e=[];this.selection.forEach(function(t,a){e.push(t.index)});var a={params:{index:e.join(",")}};this.loading=!0,r.default.post.ip.delete(a).then(function(e){t.loading=!1,t.getList(t.params.page,!0)}).catch(function(e){t.loading=!1})},onClickDel:function(t){var e=this,a={params:{index:t.row.index}};this.loading=!0,r.default.post.ip.delete(a).then(function(t){e.loading=!1,e.getList(e.params.page,!0)}).catch(function(t){e.loading=!1})},onClickCheckIp:function(){var t=this,e={params:{}};this.loading=!0,r.default.post.ip.check(e).then(function(e){t.loading=!1,t.getList(t.params.page,!0)}).catch(function(e){t.loading=!1})},onClickExportIp:function(){var t=this,e={responseType:"blob",params:{}};this.loading=!0,r.default.post.ip.exportIp(e).then(function(e){t.loading=!1;var a=e,n=new Blob([a]);if("download"in document.createElement("a")){var o=document.createElement("a");o.download="代理IP列表.xls",o.style.display="none",o.href=URL.createObjectURL(n),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(n,"代理IP列表.xls")}).catch(function(e){t.loading=!1,console.error(e)})},uploadIpSuccess:function(t){console.log("成功了"),console.log(t),this.succesFun(t)},uploadIpError:function(t){console.log("失败了"),this.$Message.error("上传失败，失败原因:"+t)},uploadFormatError:function(t,e){console.log(t),console.log(e),this.$Message.error("上传失败，失败原因：文件格式不正确，只支持xls后缀的格式")},succesFun:function(t){"1002"==t.code?this.$Message.error(t.msg):"1003"==t.code?this.$Message.error(t.msg):"1000"==t.code?(this.getList(),this.$Message.success(t.data)):this.$Message.error("上传失败，失败原因：文件格式不正确，只支持xls后缀的格式")}},components:{},created:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){var t=parseInt(this.$route.query.page)||1,e=parseInt(this.$route.query.limit)||20;t===this.params.page&&e===this.params.limit||(this.params.page!==t&&(this.params.page=t),this.params.limit!==e&&(this.params.limit=e)),this.getList()},deactivated:function(){}}},495:function(t,e,a){var n=a(496);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(19)("6ab8f889",n,!1,{})},496:function(t,e,a){e=t.exports=a(18)(!1),e.push([t.i,"\n.upload[data-v-182ef9a3] {\n  display: inline-block;\n  vertical-align: top;\n  width: 200px;\n}\n",""])},497:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Layout",[a("Card",[a("Row",[a("Col",{staticClass:"tl",attrs:{span:"12"}},[t._v("\n                配置：从第\n                "),a("Input",{staticClass:"w80",attrs:{clearable:"",placeholder:"默认是1"},model:{value:t.startIndex,callback:function(e){t.startIndex=e},expression:"startIndex"}}),t._v("\n                页到第\n                "),a("Input",{staticClass:"w80",attrs:{clearable:"",placeholder:"默认是3"},model:{value:t.endIndex,callback:function(e){t.endIndex=e},expression:"endIndex"}}),t._v("\n                页\n                "),a("span",{staticClass:"ml10"}),t._v(" "),a("Button",{staticClass:"ml10",attrs:{type:"primary"},on:{click:t.onClickReptile}},[t._v("爬取")])],1),t._v(" "),a("Col",{staticClass:"tr",attrs:{span:"12"}},[a("Upload",{staticClass:"upload",attrs:{"show-upload-list":!1,action:t.baseUrl+"/ip/uploadIp",data:t.uploadParams,"on-success":t.uploadIpSuccess,"on-error":t.uploadIpError,format:["xls"],"on-format-error":t.uploadFormatError}},[a("Button",{attrs:{type:"primary"}},[t._v("导入代理IP")])],1),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.onClickExportIp}},[t._v("导出代理IP")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.onClickDelChecked}},[t._v("删除选中")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.onClickRemoveRepeat}},[t._v("IP池去重")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.onClickCheckIp}},[t._v("检查所有IP")])],1)],1)],1),t._v(" "),a("Card",{attrs:{shadow:""}},[a("Table",{ref:"table",attrs:{border:"","highlight-row":"",loading:t.loading,columns:t.columns,data:t.ipList},on:{"on-selection-change":t.onClickSelect}})],1),t._v(" "),a("Card",{attrs:{shadow:""}},[a("Page",{attrs:{current:t.params.page,"page-size":t.params.limit,total:t.total,"show-total":"","show-elevator":""},on:{"on-change":t.getList}})],1)],1)},o=[];n._withStripped=!0;var i={render:n,staticRenderFns:o};e.default=i}});