webpackJsonp([4],{244:function(t,e,o){"use strict";function i(t){u||o(468)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(424),n=o.n(a);for(var s in a)"default"!==s&&function(t){o.d(e,t,function(){return a[t]})}(s);var l=o(478),r=o.n(l),u=!1,c=o(4),p=i,d=c(n.a,r.a,!1,p,null,null);d.options.__file="src\\views\\home\\home.vue",e.default=d.exports},279:function(t,e,o){t.exports={default:o(280),__esModule:!0}},280:function(t,e,o){o(281),t.exports=o(0).Object.assign},281:function(t,e,o){var i=o(8);i(i.S+i.F,"Object",{assign:o(282)})},282:function(t,e,o){"use strict";var i=o(26),a=o(54),n=o(34),s=o(33),l=o(94),r=Object.assign;t.exports=!r||o(20)(function(){var t={},e={},o=Symbol(),i="abcdefghijklmnopqrst";return t[o]=7,i.split("").forEach(function(t){e[t]=t}),7!=r({},t)[o]||Object.keys(r({},e)).join("")!=i})?function(t,e){for(var o=s(t),r=arguments.length,u=1,c=a.f,p=n.f;r>u;)for(var d,f=l(arguments[u++]),h=c?i(f).concat(c(f)):i(f),g=h.length,k=0;g>k;)p.call(f,d=h[k++])&&(o[d]=f[d]);return o}:r},424:function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(279),n=i(a),s=o(16),l=i(s),r=o(96),u=i(r),c=o(470),p=i(c),d=o(474),f=i(d);e.default={name:"home",components:{description:p.default,wbImg:f.default},data:function(){var t=this;return{columns:[{title:"id",key:"id",render:function(e,o){return e("div",[e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){t.$router.push("/catalog?bookId="+o.row.id),e.stopPropagation(),e.preventDefault()}}},o.row.id),e("a",{attrs:{href:"javascript:void(0);",style:"margin-left:5px;color:"+(2==o.row.isJin&&"red;")},on:{click:function(e){t.onClickUpdateBookisJin(o.row.id,"2"==o.row.isJin?"1":"2",o.row.name)}}},1==o.row.isJin?"(禁用)":"(启用)")])}},{title:"书名",key:"name"},{title:"小说类型",key:"bookType"},{title:"作者",key:"author"},{title:"来源名称",key:"reptileType",render:function(e,o){return e("a",{attrs:{href:"javascript:void(0);",target:"_blank"},on:{click:function(e){t.$router.push("/reptile-tool/channel")}}},t.reptileList[o.row.reptileType].name)}},{title:"来源地址",key:"OriginUrl",render:function(t,e){return t("a",{attrs:{href:e.row.OriginUrl,target:"_blank"}},e.row.OriginUrl)}},{title:"图片地址",key:"imgUrl",render:function(e,o){return e("img",{attrs:{src:u.default.apiUrl+"/images/"+o.row.id,style:"max-width:50px; max-height:50px;display:block;margin:2px;"},on:{mouseenter:function(e){e.stopPropagation(),e.preventDefault(),t.bigImg.url=e.target.src},mousemove:function(e){e.stopPropagation(),e.preventDefault(),t.bigImg.right=document.activeElement.clientWidth-e.clientX,t.bigImg.top=e.clientY},mouseleave:function(e){e.stopPropagation(),e.preventDefault(),t.bigImg.url="",t.bigImg.right=0,t.bigImg.top=0}}})}},{title:"爬取状态",key:"type",render:function(t,e){return t("span",{attrs:{style:"color:"+(3!=e.row.type&&"red;")}},"3"==e.row.type?"已爬取":"未爬取")}},{title:"小说状态",key:"bookStatus",render:function(e,o){return e("div",[e("span",{attrs:{style:"color:"+(1!=o.row.bookStatus&&"red;")}},"1"==o.row.bookStatus?"连载":"完本"),e("a",{attrs:{href:"javascript:void(0);",style:"color:"+(1==o.row.bookStatus&&"red;")},on:{click:function(){t.onClickUpdateBookStatus(o.row.id,"1"==o.row.bookStatus?2:1,o)}}},"1"==o.row.bookStatus?"(转完本)":"(转连载)")])}},{title:"更新时间",key:"updateTime",render:function(t,e){return t("span",{},l.default.timeChange(e.row.updateTime))}},{title:"操作",key:"updateTime",render:function(e,o){return e("div",[e("a",{attrs:{href:"javascript:void(0);"},on:{click:function(){t.onClickUpdateBookInfo(o.row.id)}}},"更新小说基本信息"),e("a",{attrs:{href:"javascript:void(0);",style:"margin-left:10px;"},on:{click:function(){if("1"!=o.row.bookStatus)return void t.$Message.info("已经是最新章节");t.onClickUpdateNewCatalog(o.row.id,o.row.name)}}},"1"==o.row.bookStatus?"更新到最新章节":"已经是最新章节"),e("a",{attrs:{href:"javascript:void(0);",style:"margin-left:10px;"},on:{click:function(){t.onClickDelBook(o.row.id,o.row.name)}}},"删除")])}},{title:"描述",type:"expand",width:70,render:function(t,e){return t(p.default,{props:{row:e.row}})}}],books:[],params:{page:null,limit:null},total:1,loading:!1,selectList:[{value:"",label:"全部"},{value:"bookId",label:"bookId"},{value:"bookName",label:"书名"},{value:"author",label:"作者名"},{value:"description",label:"描述"}],bookStatusList:[{value:"",label:"全部"},{value:"1",label:"连载"},{value:"2",label:"完本"}],bookStatus:"",selectName:"",inputValue:"",inputPlaceholder:"",reptileStatusList:[{value:"",label:"全部"},{value:3,label:"已爬"},{value:2,label:"未爬"}],isJinList:[{value:"",label:"全部"},{value:"1",label:"启用"},{value:"2",label:"禁用"}],isJin:"",type:"",isme:!1,bigImg:{url:"",right:0,top:0},bookTypeList:[],bookType:"",reptileList:{length:0}}},computed:{},methods:{getBooks:function(t){var e=this;if(!this.loading){t>0&&(this.params.page=t);var o={params:{page:this.params.page,limit:this.params.limit}};this.selectName&&this.inputValue&&(o.params[this.selectName]=this.inputValue),this.type&&(o.params.type=this.type),this.bookType&&"全部"!=this.bookType&&(o.params.bookType=this.bookType),this.bookStatus&&(o.params.bookStatus=this.bookStatus),this.isJin&&(o.params.isJin=this.isJin),this.loading=!0,this.$router.replace({path:"/home",query:(0,n.default)({},o.params)}),l.default.post.books.book(o).then(function(t){e.books=t.book,e.total=t.count,e.loading=!1}).catch(function(t){e.loading=!1})}},expandToggle:function(t,e){this.$refs.table.$el.getElementsByClassName("ivu-table-cell-expand")[e].click()},selectChange:function(t){this.isme&&(this.inputValue="",t.value?this.inputPlaceholder="请输入"+t.label:(this.inputPlaceholder="",this.getBooks(1)))},onClickSearch:function(){this.isme&&this.getBooks(1)},onClickUpdateBookInfo:function(t){var e=this;if(!this.loading){var o={params:{bookId:t}};this.loading=!0,l.default.post.books.updateBookInfo(o).then(function(t){e.loading=!1,t.book[0].isHandle?(e.$Message.success("已更新"),e.getBooks()):e.$Message.success("已是最新状态")}).catch(function(t){console.log(t),e.loading=!1})}},onClickUpdateNewCatalog:function(t,e){var o=this;if(!this.loading){this.loading=!0;var i={params:{bookId:t,bookName:e}};l.default.post.books.updateNewCatalog(i).then(function(t){o.loading=!1,o.getBooks()}).catch(function(t){o.getBooks(),o.loading=!1})}},onClickOneKeyUpdateNewCatalog:function(){var t=this;if(!this.loading){this.loading=!0;var e={params:{}};l.default.post.books.oneKeyUpdateNewCatalog(e).then(function(e){t.loading=!1,t.getBooks()}).catch(function(e){t.getBooks(),t.loading=!1})}},onclickOneKeyGetAllBookImg:function(){var t=this;if(!this.loading){this.loading=!0;var e={params:{}};l.default.post.common.oneKeyGetAllBookImg(e).then(function(){t.loading=!1}).catch(function(e){t.loading=!1})}},onClickDelBook:function(t,e){var o=this;this.$Modal.confirm({closable:!0,title:"温馨提示",content:"<p>你确定要删除《"+e+"》吗？</p>",onOk:function(){if(!o.loading){o.loading=!0;var i={params:{bookId:t,bookName:e}};l.default.post.books.delBook(i).then(function(t){o.$Message.success(t),o.loading=!1,o.getBooks()}).catch(function(t){o.loading=!1})}},onCancel:function(){o.$Message.info("你取消了删除")}})},onClickUpdateBookStatus:function(t,e,o){var i=this,a=1==e?"连载":"完本";this.$Modal.confirm({closable:!0,title:o.row.name+"_"+o.row.author,content:"<p>你确定要转成"+a+"状态?</p>",onOk:function(){if(!i.loading){var o={params:{bookId:t,bookStatus:e}};i.loading=!0,l.default.post.books.updateBookStatus(o).then(function(t){i.$Message.success("已转为"+(1==e?"连载":"完本")),i.loading=!1,i.getBooks()}).catch(function(t){i.loading=!1})}},onCancel:function(){i.$Message.info("你取消了转换")}})},getBookTypeList:function(t){var e=this,o={params:{}};l.default.post.type.bookTypeList(o).then(function(t){t.bookTypeList.unshift({bookType:"全部"}),e.bookTypeList=t.bookTypeList}).catch(function(t){console.error("err")})},onClickUpdateBookisJin:function(t,e,o){var i=this,a={params:{bookId:t,isJin:e}};this.loading=!0,l.default.post.books.updateBookIsJin(a).then(function(t){i.$Message.success(t),i.loading=!1,i.getBooks()}).catch(function(t){i.loading=!1,1==e&&i.$router.push("/reptile-tool/progress-error?bookName="+o)})},getReptileList:function(){var t=this,e={params:{}};l.default.post.reptile.list(e).then(function(e){t.reptileList={},e.reptileList.forEach(function(e,o){t.reptileList[e.reptileTypeId]=e}),t.reptileList.length=e.reptileList.length}).catch(function(t){})},activatedStart:function(){var t=this,e=parseInt(this.$route.query.page)||1,o=parseInt(this.$route.query.limit)||10,i=parseInt(this.$route.query.type)||"",a=this.$route.query.bookType||"",n=this.$route.query.bookStatus||"",s=this.$route.query.isJin||"",l="",r="";this.bookTypeList.length<=0&&this.getBookTypeList(),this.selectList.forEach(function(e,o){t.$route.query[e.value]&&(l=e.value,r=t.$route.query[e.value])}),e===this.params.page&&o===this.params.limit&&i===this.type&&l===this.selectName&&r===this.inputValue&&a===this.bookType&&this.bookStatus===n&&this.isJin===s||(this.type!==i&&(this.type=i),this.selectName!==l&&(this.selectName=l),this.inputValue!==r&&(this.inputValue=r),this.bookStatus!==n&&(this.bookStatus=n),this.isJin!==s&&(this.isJin=s),this.bookType!==a&&(this.bookTypeList.length<=0&&(this.bookTypeList=[{bookType:"全部"},{bookType:a}]),this.bookType=a),e!==this.params.page&&(this.params.page=e),o!==this.params.limit&&(this.params.limit=o),this.getBooks()),this.$nextTick(function(){t.isme=!0})},start:function(){var t=this;if(this.reptileList.length>0)this.activatedStart();else var e=setTimeout(function(){t.start(),clearTimeout(e),e=null},300)}},created:function(){this.getReptileList()},mounted:function(){},activated:function(){this.start()},deactivated:function(){this.isme=!1}}},425:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{row:Object}}},426:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["img","right","top"],name:"wb-img",data:function(){return{}},computed:{},methods:{},components:{},created:function(){},mounted:function(){},beforeDestroy:function(){},destroyed:function(){}}},468:function(t,e,o){var i=o(469);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(19)("55175e39",i,!1,{})},469:function(t,e,o){e=t.exports=o(18)(!1),e.push([t.i,"",""])},470:function(t,e,o){"use strict";function i(t){u||o(471)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(425),n=o.n(a);for(var s in a)"default"!==s&&function(t){o.d(e,t,function(){return a[t]})}(s);var l=o(473),r=o.n(l),u=!1,c=o(4),p=i,d=c(n.a,r.a,!1,p,"data-v-33df4762",null);d.options.__file="src\\views\\home\\components\\description.vue",e.default=d.exports},471:function(t,e,o){var i=o(472);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(19)("5dc53c68",i,!1,{})},472:function(t,e,o){e=t.exports=o(18)(!1),e.push([t.i,"\n.expand-row[data-v-33df4762]{\n    margin-bottom: 16px;\n}\n",""])},473:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Row",{staticClass:"expand-row"},[o("Col",{attrs:{span:"24"}},[o("span",{staticClass:"expand-key"},[t._v("描述: ")]),t._v(" "),o("span",{staticClass:"expand-value"},[t._v(t._s(t.row.description))])])],1)],1)},a=[];i._withStripped=!0;var n={render:i,staticRenderFns:a};e.default=n},474:function(t,e,o){"use strict";function i(t){u||o(475)}Object.defineProperty(e,"__esModule",{value:!0});var a=o(426),n=o.n(a);for(var s in a)"default"!==s&&function(t){o.d(e,t,function(){return a[t]})}(s);var l=o(477),r=o.n(l),u=!1,c=o(4),p=i,d=c(n.a,r.a,!1,p,null,null);d.options.__file="src\\views\\home\\components\\wb-img.vue",e.default=d.exports},475:function(t,e,o){var i=o(476);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);o(19)("006909cc",i,!1,{})},476:function(t,e,o){e=t.exports=o(18)(!1),e.push([t.i,"\n.wb-img{\n    position: fixed;\n    max-width: 60%;\n    max-height: 80%;\n    z-index: 1000;\n    top:100px;\n}\n",""])},477:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("img",{staticClass:"wb-img",style:{right:t.right?t.right+100+"px":"auto",top:t.top?t.top-100+"px":"100px"},attrs:{src:t.img}})])},a=[];i._withStripped=!0;var n={render:i,staticRenderFns:a};e.default=n},478:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Layout",[o("Card",[o("Row",[o("Col",{attrs:{span:"12"}},[o("Select",{staticClass:"w100",attrs:{placeholder:"全部","label-in-value":""},on:{"on-change":t.selectChange},model:{value:t.selectName,callback:function(e){t.selectName=e},expression:"selectName"}},t._l(t.selectList,function(e){return o("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),o("Input",{directives:[{name:"show",rawName:"v-show",value:t.selectName,expression:"selectName"}],staticClass:"w200",attrs:{placeholder:t.inputPlaceholder,clearable:""},nativeOn:{keyup:function(e){return"button"in e||13===e.keyCode?t.onClickSearch(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),t._v(" "),o("Select",{staticClass:"w100",attrs:{placeholder:"全部","label-in-value":""},on:{"on-change":t.onClickSearch},model:{value:t.isJin,callback:function(e){t.isJin=e},expression:"isJin"}},t._l(t.isJinList,function(e){return o("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),o("Select",{staticClass:"w100",attrs:{placeholder:"全部","label-in-value":""},on:{"on-change":t.onClickSearch},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.reptileStatusList,function(e){return o("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])})),t._v(" "),o("Select",{staticClass:"w100",attrs:{placeholder:"全部","label-in-value":""},on:{"on-change":t.onClickSearch},model:{value:t.bookType,callback:function(e){t.bookType=e},expression:"bookType"}},t._l(t.bookTypeList,function(e){return o("Option",{key:e.bookType,attrs:{value:e.bookType}},[t._v(t._s(e.bookType))])})),t._v(" "),o("Select",{staticClass:"w100",attrs:{placeholder:"全部","label-in-value":""},on:{"on-change":t.onClickSearch},model:{value:t.bookStatus,callback:function(e){t.bookStatus=e},expression:"bookStatus"}},t._l(t.bookStatusList,function(e){return o("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),o("Col",{staticClass:"tr",attrs:{span:"12"}},[o("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.onClickSearch}},[t._v("搜索")]),t._v(" "),o("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.onClickOneKeyUpdateNewCatalog}},[t._v("一键全部更新至最新章节")]),t._v(" "),o("Button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.onclickOneKeyGetAllBookImg}},[t._v("一键跟新全部图片")])],1)],1)],1),t._v(" "),o("Card",{attrs:{shadow:""}},[o("Table",{ref:"table",attrs:{border:"","highlight-row":"",loading:t.loading,columns:t.columns,data:t.books},on:{"on-row-dblclick":t.expandToggle}})],1),t._v(" "),o("Card",{attrs:{shadow:""}},[o("Page",{attrs:{current:t.params.page,"page-size":t.params.limit,total:t.total,"show-total":"","show-elevator":""},on:{"on-change":t.getBooks}})],1),t._v(" "),o("wb-img",{attrs:{img:t.bigImg.url,right:t.bigImg.right,top:t.bigImg.top}})],1)},a=[];i._withStripped=!0;var n={render:i,staticRenderFns:a};e.default=n}});